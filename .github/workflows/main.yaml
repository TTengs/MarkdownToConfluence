name: Upload Documentation

on: [push]
#    paths:
#      - 'documentation/**'

jobs:
  hello_world_job:
    runs-on: ubuntu-latest
    name: Converting Markdown to Confluence
    steps:
      - name: Checkout
        uses: actions/checkout@v3
        with:
          fetch-depth: 0
      - name: Get changed files
        id: getfile
        run: |
          echo "::set-output name=files::$(git diff --name-only ${{ github.event.before }}..${{ github.event.after }})"
#      - run: echo "CHANGED_FILES=$(git diff --name-only ${{ github.event.before }}..${{ github.event.after }})" >> $GITHUB_ENV
      - name: Conversion step
        env:
          CONFLUENCE_URL: 'https://at-bachelor.atlassian.net/wiki'
          CONFLUENCE_SPACE_KEY: '~955037829'
          AUTH_TOKEN: ${{ secrets.AUTH_TOKEN }}
        uses: ./ # Uses an action in the root directory
        id: Convert
        with:
          fileslocation: './documentation'
